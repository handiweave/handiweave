<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SEWM8S3WL0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-SEWM8S3WL0');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#7A5548">

    <title>Handiweave | Traditions and Trends</title>
    <link rel="icon" href="logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg: #F9F8F6; --card: #fff; --text: #333333; --muted: #777777; --brand: #7A5548;
            --brand-dark: #5D433A; --gold: #C5A065; --wa: #25D366; --rzp: #3395ff;
            --success: #2E8B57; --error: #DC143C; --shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            --radius: 8px; --transition: all 0.3s ease;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Lato', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; overflow-x: hidden; }
        h1, h2, h3, h4, .logo-text { font-family: 'Playfair Display', serif; font-weight: 600; }

        /* NAVIGATION FIX FOR MOBILE */
        .main-nav {
            background: white; padding: 0.8rem 1rem; position: sticky; top: 0; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        }
        .nav-links { display: flex; gap: 1rem; align-items: center; }
        .nav-link { font-size: 0.75rem; letter-spacing: 0.5px; text-transform: uppercase; font-weight: 700; cursor: pointer; color: var(--text); padding: 5px 0; }
        .nav-link.active { color: var(--brand); border-bottom: 2px solid var(--gold); }

        .cart-icon { position: relative; cursor: pointer; font-size: 1.4rem; color: var(--brand); padding: 5px; }
        .cart-count {
            position: absolute; top: 0; right: 0; background: var(--gold); color: white;
            border-radius: 50%; width: 18px; height: 18px; font-size: 0.65rem; display: flex; align-items: center; justify-content: center; font-weight: 700;
        }

        /* HEADER */
        .main-header { background: white; padding: 2rem 1rem; text-align: center; }
        .logo-img { width: 90px; margin-bottom: 0.5rem; }
        .logo-text { font-size: 2rem; color: var(--brand-dark); }
        .tagline { color: var(--gold); font-style: italic; font-size: 1rem; }

        /* SECTIONS */
        .section-container { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; display: none; }
        .active-section { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* SEARCH */
        .search-container { max-width: 500px; margin: 1.5rem auto 0; position: relative; padding: 0 10px; }
        .search-input { width: 100%; padding: 0.8rem 1.5rem 0.8rem 2.5rem; border: 1px solid #ddd; border-radius: 50px; font-size: 0.9rem; }

        /* PRODUCTS GRID - MOBILE 2 COLUMNS */
        .products-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        @media (min-width: 768px) { .products-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem; } }

        .product-card { background: white; border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); transition: var(--transition); }
        .product-image { aspect-ratio: 1/1; overflow: hidden; cursor: pointer; }
        .product-image img { width: 100%; height: 100%; object-fit: cover; }
        .product-info { padding: 10px; text-align: center; }
        .product-name { font-size: 0.9rem; margin-bottom: 5px; color: var(--brand-dark); height: 2.6em; overflow: hidden; }
        .current-price { font-weight: 700; color: var(--brand); font-size: 1.1rem; }
        .add-to-cart-btn { background: var(--brand); color: white; width: 100%; padding: 10px; border-radius: 4px; font-weight: 600; font-size: 0.8rem; margin-top: 5px; }

        /* MODALS */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1001; display: none; }
        .overlay.active { display: block; }
        .product-modal, .checkout-modal, .cart-sidebar { 
            position: fixed; background: white; z-index: 1002; display: none; flex-direction: column;
        }
        .cart-sidebar { top: 0; right: 0; width: 100%; max-width: 400px; height: 100%; }
        .product-modal { top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 600px; border-radius: 12px; padding: 15px; max-height: 85vh; overflow-y: auto; }
        .active { display: flex !important; }

        /* WHATSAPP FLOAT */
        .whatsapp-float { position: fixed; bottom: 20px; right: 20px; width: 55px; height: 55px; background: var(--wa); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; z-index: 999; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* FOOTER */
        .main-footer { background: white; padding: 2rem 1rem; text-align: center; border-top: 1px solid #eee; margin-top: 2rem; }
        .social-links { display: flex; justify-content: center; gap: 1.5rem; font-size: 1.5rem; margin: 1rem 0; color: var(--brand); }
    </style>
</head>

<body>
    <a href="https://wa.me/919882212962" class="whatsapp-float" target="_blank"><i class="fab fa-whatsapp"></i></a>

    <nav class="main-nav">
        <div class="nav-links">
            <span class="nav-link active" onclick="switchView('shop')">Shop</span>
            <span class="nav-link" onclick="switchView('about')">Story</span>
            <span class="nav-link" onclick="switchView('contact')">Contact</span>
            <span class="nav-link" onclick="switchView('policies')">Policies</span>
        </div>
        <div class="cart-icon" onclick="toggleCart(true)">
            <i class="fas fa-shopping-bag"></i>
            <span class="cart-count" id="cartCount">0</span>
        </div>
    </nav>

    <header class="main-header">
        <img src="logo.png" alt="Handiweave" class="logo-img">
        <h1 class="logo-text">HANDIWEAVE</h1>
        <p class="tagline">Traditions and Trends</p>
        <div class="search-container">
            <input type="search" class="search-input" id="searchInput" placeholder="Search products..." oninput="renderProducts()">
        </div>
    </header>

    <section id="shop-view" class="section-container active-section">
        <div class="products-grid" id="productsContainer"></div>
    </section>

    <section id="about-view" class="section-container">
        <h2>Our Story</h2>
        <div style="margin-top:1rem;">
            <p>Each tana-bana carries a heartbeat — of tradition, of memory, of love passed down generations.</p>
            <img src="images/ar1.jpg" style="width:100%; border-radius:8px; margin: 1rem 0;" onerror="this.src='https://via.placeholder.com/400x300?text=Handiweave'">
        </div>
    </section>

    <section id="contact-view" class="section-container">
        <h2>Contact Us</h2>
        <form action="https://formspree.io/f/xojagdvw" method="POST" style="margin-top:1rem;">
            <input type="text" name="name" placeholder="Full Name" style="width:100%; padding:12px; margin-bottom:10px;" required>
            <input type="email" name="email" placeholder="Email" style="width:100%; padding:12px; margin-bottom:10px;" required>
            <textarea name="message" placeholder="Your Message" style="width:100%; padding:12px; height:100px;" required></textarea>
            <button type="submit" style="background:var(--brand); color:white; width:100%; padding:12px; margin-top:10px; font-weight:bold;">Send Message</button>
        </form>
    </section>

    <section id="policies-view" class="section-container">
        <h2>Policies</h2>
        <div style="margin-top:1rem;">
            <p><strong>Shipping:</strong> 5-7 business days across India.</p><br>
            <p><strong>Returns:</strong> 7-day return policy for unused items.</p>
        </div>
    </section>

    <footer class="main-footer">
        <div class="social-links">
            <a href="https://instagram.com/handiweave"><i class="fab fa-instagram"></i></a>
            <a href="https://x.com/handiweave"><i class="fab fa-x-twitter"></i></a>
            <a href="https://youtube.com/@handiweave"><i class="fab fa-youtube"></i></a>
        </div>
        <p>© 2025 Handiweave</p>
    </footer>

    <div class="overlay" id="overlay" onclick="closeAll()"></div>
    <aside class="cart-sidebar" id="cartSidebar">
        <div style="padding:20px; border-bottom:1px solid #eee; display:flex; justify-content:space-between;">
            <h3>Your Bag</h3>
            <i class="fas fa-times" onclick="closeAll()"></i>
        </div>
        <div id="cartItemsList" style="flex:1; overflow-y:auto; padding:20px;"></div>
        <div style="padding:20px; border-top:1px solid #eee;">
            <div style="display:flex; justify-content:space-between; font-weight:bold; margin-bottom:10px;">
                <span>Total:</span><span id="cartTotalText">₹0</span>
            </div>
            <button onclick="whatsappCheckout()" style="background:var(--wa); color:white; width:100%; padding:15px; font-weight:bold; border-radius:5px;">Order on WhatsApp</button>
        </div>
    </aside>

    <div class="product-modal" id="productModal">
        <div id="modalContent"></div>
        <button onclick="closeAll()" style="margin-top:10px; padding:10px; background:#f5f5f5;">Close</button>
    </div>

    <script>
        const PRODUCTS = [
            { id: 1, name: "Merino Luxe I", price: 2499, img: "images/merino-luxe-1.jpg", link: "https://rzp.io/rzp/zuErYBO" },
            { id: 2, name: "Merino Luxe II", price: 2499, img: "images/merino-luxe-2.jpg", link: "https://rzp.io/rzp/zuErYBO" },
            { id: 3, name: "Royal Angora", price: 5499, img: "images/royal-angora-white.jpg", link: "https://rzp.io/rzp/Tot28zKI" },
            { id: 7, name: "Trendy Stole ST1", price: 699, img: "images/trendy-stole-1.jpg", link: "https://rzp.io/rzp/3TgywOm" },
            { id: 8, name: "Trendy Stole ST2", price: 799, img: "images/trendy-stole-2.jpg", link: "https://rzp.io/rzp/S4sfp5y" },
            { id: 9, name: "Trendy Stole ST3", price: 799, img: "images/trendy-stole-3.jpg", link: "https://rzp.io/rzp/S4sfp5y" },
            { id: 10, name: "Heritage Wall Art I", price: 1200, img: "images/2wall.png", link: "https://rzp.io/rzp/tSEaQin3" }
        ];

        let cart = JSON.parse(localStorage.getItem('hw_cart')) || [];

        function renderProducts() {
            const container = document.getElementById('productsContainer');
            const term = document.getElementById('searchInput').value.toLowerCase();
            const filtered = PRODUCTS.filter(p => p.name.toLowerCase().includes(term));
            
            container.innerHTML = filtered.map(p => `
                <div class="product-card">
                    <div class="product-image" onclick="openProduct(${p.id})">
                        <img src="${p.img}" onerror="this.src='https://via.placeholder.com/300?text=Handiweave'">
                    </div>
                    <div class="product-info">
                        <div class="product-name">${p.name}</div>
                        <div class="current-price">₹${p.price}</div>
                        <button class="add-to-cart-btn" onclick="addToCart(${p.id})">Add to Cart</button>
                    </div>
                </div>
            `).join('');
        }

        function switchView(view) {
            document.querySelectorAll('.section-container').forEach(s => s.classList.remove('active-section'));
            document.getElementById(view + '-view').classList.add('active-section');
            document.querySelectorAll('.nav-link').forEach(l => {
                l.classList.toggle('active', l.getAttribute('onclick').includes(view));
            });
            window.scrollTo(0,0);
        }

        function addToCart(id) {
            const p = PRODUCTS.find(x => x.id === id);
            cart.push(p);
            updateCart();
            alert("Added!");
        }

        function updateCart() {
            localStorage.setItem('hw_cart', JSON.stringify(cart));
            document.getElementById('cartCount').innerText = cart.length;
        }

        function toggleCart(show) {
            const sidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('overlay');
            if(show) {
                renderCart();
                sidebar.classList.add('active');
                overlay.classList.add('active');
            } else {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            }
        }

        function renderCart() {
            const list = document.getElementById('cartItemsList');
            let total = 0;
            list.innerHTML = cart.map((item, index) => {
                total += item.price;
                return `<div style="display:flex; justify-content:space-between; margin-bottom:15px; font-size:0.9rem;">
                    <span>${item.name}</span>
                    <span>₹${item.price} <i class="fas fa-trash" style="color:red; margin-left:10px;" onclick="removeFromCart(${index})"></i></span>
                </div>`;
            }).join('');
            document.getElementById('cartTotalText').innerText = '₹' + total;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
            renderCart();
        }

        function openProduct(id) {
            const p = PRODUCTS.find(x => x.id === id);
            document.getElementById('modalContent').innerHTML = `
                <img src="${p.img}" style="width:100%; border-radius:8px;">
                <h2 style="margin-top:1rem;">${p.name}</h2>
                <p style="color:var(--brand); font-weight:bold; font-size:1.4rem; margin: 10px 0;">₹${p.price}</p>
                <a href="${p.link}" target="_blank" style="display:block; background:var(--rzp); color:white; text-align:center; padding:15px; text-decoration:none; font-weight:bold; border-radius:5px;">Buy via Razorpay</a>
            `;
            document.getElementById('productModal').classList.add('active');
            document.getElementById('overlay').classList.add('active');
        }

        function whatsappCheckout() {
            if(cart.length === 0) return alert("Empty bag!");
            let msg = "*Order Request:*%0A%0A";
            cart.forEach(i => msg += `- ${i.name}: ₹${i.price}%0A`);
            window.open(`https://wa.me/919882212962?text=${msg}`, '_blank');
        }

        function closeAll() {
            document.querySelectorAll('.active').forEach(el => el.classList.remove('active'));
            document.getElementById('overlay').classList.remove('active');
        }

        window.onload = () => { renderProducts(); updateCart(); };
    </script>
</body>
</html>